{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "title": "Silver Tier MCP Server API",
  "description": "Function signatures for the Silver Tier MCP server exposing email and Facebook Page posting capabilities",
  "version": "1.0.0",
  "functions": [
    {
      "name": "send_email",
      "description": "Send an email via configured SMTP server. Requires human approval before execution.",
      "parameters": {
        "type": "object",
        "properties": {
          "to": {
            "type": "string",
            "format": "email",
            "description": "Recipient email address",
            "examples": ["user@example.com"]
          },
          "subject": {
            "type": "string",
            "minLength": 1,
            "maxLength": 200,
            "description": "Email subject line",
            "examples": ["Weekly Project Status Report"]
          },
          "body": {
            "type": "string",
            "minLength": 1,
            "maxLength": 50000,
            "description": "Email body content (plain text or HTML)",
            "examples": ["Hello team,\n\nHere is this week's status update..."]
          },
          "cc": {
            "type": "array",
            "items": {
              "type": "string",
              "format": "email"
            },
            "description": "Optional CC recipients",
            "default": []
          },
          "bcc": {
            "type": "array",
            "items": {
              "type": "string",
              "format": "email"
            },
            "description": "Optional BCC recipients",
            "default": []
          },
          "content_type": {
            "type": "string",
            "enum": ["text/plain", "text/html"],
            "description": "Email content type",
            "default": "text/plain"
          }
        },
        "required": ["to", "subject", "body"],
        "additionalProperties": false
      },
      "returns": {
        "type": "object",
        "properties": {
          "success": {
            "type": "boolean",
            "description": "True if email sent successfully"
          },
          "message_id": {
            "type": "string",
            "description": "SMTP message ID for tracking"
          },
          "timestamp": {
            "type": "string",
            "format": "date-time",
            "description": "ISO 8601 timestamp of sending"
          },
          "error": {
            "type": "string",
            "description": "Error message if success is false"
          }
        },
        "required": ["success", "timestamp"]
      },
      "errors": [
        {
          "code": "SMTP_CONNECTION_ERROR",
          "description": "Failed to connect to SMTP server",
          "retry": true
        },
        {
          "code": "AUTHENTICATION_ERROR",
          "description": "SMTP authentication failed",
          "retry": false
        },
        {
          "code": "INVALID_RECIPIENT",
          "description": "Recipient email address is invalid",
          "retry": false
        },
        {
          "code": "RATE_LIMIT_EXCEEDED",
          "description": "Email rate limit exceeded",
          "retry": true,
          "retry_after_seconds": 3600
        },
        {
          "code": "MESSAGE_TOO_LARGE",
          "description": "Email body exceeds size limit",
          "retry": false
        }
      ],
      "rate_limit": {
        "requests_per_hour": 50,
        "burst_limit": 10
      },
      "requires_approval": true
    },
    {
      "name": "post_facebook_page",
      "description": "Post a message to a Facebook Page using Meta Graph API. Requires human approval before execution.",
      "parameters": {
        "type": "object",
        "properties": {
          "message": {
            "type": "string",
            "minLength": 1,
            "maxLength": 63206,
            "description": "Post content (text only, no images in Silver Tier)",
            "examples": ["Excited to announce our new product launch! Learn more at example.com"]
          },
          "link": {
            "type": "string",
            "format": "uri",
            "description": "Optional URL to include in post",
            "examples": ["https://example.com/product"]
          },
          "published": {
            "type": "boolean",
            "description": "Whether to publish immediately (true) or save as draft (false)",
            "default": true
          }
        },
        "required": ["message"],
        "additionalProperties": false
      },
      "returns": {
        "type": "object",
        "properties": {
          "success": {
            "type": "boolean",
            "description": "True if post published successfully"
          },
          "post_id": {
            "type": "string",
            "description": "Facebook post ID for tracking"
          },
          "post_url": {
            "type": "string",
            "format": "uri",
            "description": "Public URL of the published post"
          },
          "timestamp": {
            "type": "string",
            "format": "date-time",
            "description": "ISO 8601 timestamp of posting"
          },
          "error": {
            "type": "string",
            "description": "Error message if success is false"
          }
        },
        "required": ["success", "timestamp"]
      },
      "errors": [
        {
          "code": "API_CONNECTION_ERROR",
          "description": "Failed to connect to Meta Graph API",
          "retry": true
        },
        {
          "code": "INVALID_ACCESS_TOKEN",
          "description": "Facebook Page Access Token is invalid or expired",
          "retry": false
        },
        {
          "code": "INSUFFICIENT_PERMISSIONS",
          "description": "Access token lacks required permissions (pages_manage_posts)",
          "retry": false
        },
        {
          "code": "RATE_LIMIT_EXCEEDED",
          "description": "Facebook API rate limit exceeded",
          "retry": true,
          "retry_after_seconds": 3600
        },
        {
          "code": "MESSAGE_TOO_LONG",
          "description": "Post message exceeds Facebook's character limit",
          "retry": false
        },
        {
          "code": "SPAM_DETECTED",
          "description": "Facebook flagged content as spam",
          "retry": false
        }
      ],
      "rate_limit": {
        "requests_per_hour": 25,
        "burst_limit": 5
      },
      "requires_approval": true,
      "api_endpoint": "https://graph.facebook.com/v18.0/{page_id}/feed",
      "required_permissions": ["pages_manage_posts", "pages_read_engagement"]
    }
  ],
  "authentication": {
    "email": {
      "method": "SMTP_AUTH",
      "credentials_source": "environment_variables",
      "required_env_vars": ["EMAIL_PASSWORD"]
    },
    "facebook": {
      "method": "PAGE_ACCESS_TOKEN",
      "credentials_source": "environment_variables",
      "required_env_vars": ["FACEBOOK_PAGE_ACCESS_TOKEN", "FACEBOOK_PAGE_ID"]
    }
  },
  "logging": {
    "log_all_requests": true,
    "log_parameters": true,
    "log_responses": true,
    "redact_sensitive_fields": ["password", "access_token", "message_id"],
    "log_file_path": "mcp_server/logs/mcp-server-{date}.log"
  },
  "circuit_breaker": {
    "enabled": true,
    "failure_threshold": 5,
    "timeout_seconds": 60,
    "half_open_max_requests": 1
  }
}
